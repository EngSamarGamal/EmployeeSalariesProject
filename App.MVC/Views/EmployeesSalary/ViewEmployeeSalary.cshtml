@{
    ViewData["Title"] = " View Salary";
}
<br />
<br />
<div class="container" dir="rtl" style="font-family: Tahoma; font-size:14px;">

    <!-- Header -->
    <div class="row mb-3">
        <div class="col-12 text-center">
            <h4 style="color:#b22222;">وحدة إدارة الرواتب و الاجور / قائمة الرواتب</h4>
            <hr style="border-top:3px solid #d19;">
        </div>
    </div>

    <!-- Filters Row -->
    <div class="row mb-3">
        <!-- Buttons Row -->
        <div class="row mb-3">
            <div class="col-md-12 text-start">

                <button id="btnPrintSalaries" class="btn btn-success me-2">
                    طباعة الرواتب
                </button>

                <button id="btnPrintDeductions" class="btn btn-warning">
                    طباعة الخصومات والعلاوات
                </button>

            </div>
        </div>

        <!-- Employee Dropdown -->
        <div class="col-md-4 mb-2">
            <label class="form-label">اختر الموظف</label>
            <select id="employeeSelect" class="form-control">
                <option value="">جاري التحميل...</option>
            </select>
        </div>

        <!-- Month Dropdown -->
        <div class="col-md-4 mb-2">
            <label class="form-label">الشهر</label>
            <select id="monthSelect" class="form-control"></select>
        </div>

        <!-- Year Dropdown -->
        <div class="col-md-4 mb-2">
            <label class="form-label">السنة</label>
            <select id="yearSelect" class="form-control"></select>
        </div>
    </div>

    <!-- Search Button -->
    <div class="row mb-3">
        <div class="col-md-12 text-end">
            <button id="btnSearch" class="btn btn-primary px-4">بحث</button>
        </div>
    </div>

    <!-- TABLE GRID OUTPUT HERE -->
    <div id="salaryGridContainer" class="mt-3">
        <div class="p-3 text-muted text-center">
            اختر الموظف أو الشهر والسنة لعرض البيانات
        </div>
    </div>
</div>

@section Scripts {
    @Html.Partial("Partial/_GetSalaries")
    <script>
                document.getElementById("btnPrintSalaries").addEventListener("click", function () {

            const emp = employeeSelect.value || "";
            const month = monthSelect.value || "";
            const year = yearSelect.value || "";


            const url = `/EmployeesSalary/PrintSalaries?employeeId=${encodeURIComponent(emp)}&month=${encodeURIComponent(month)}&year=${encodeURIComponent(year)}`;

            window.open(url, "_blank");
        });

    </script>

}


